<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'market/css/market_styles.css' %}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üìä –†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç</h1>
            <div class="stats">
                <span class="stat-item">
                    <span class="stat-label">–í—Å–µ–≥–æ –ø–∞—Ä:</span>
                    <span class="stat-value">{{ total_count }}</span>
                </span>
                <span class="stat-item">
                    <span class="stat-label">–ü–æ–∫–∞–∑–∞–Ω–æ:</span>
                    <span class="stat-value" id="visibleCount">{{ total_count }}</span>
                </span>
            </div>
        </header>
        
        <!-- –¢–≤–æ–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã -->
        <div class="controls">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—Ä–µ..." class="search-input">
            </div>
            <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∏–ª–∏ —É–±—Ä–∞—Ç—å -->
            <div class="sort-container">
                <button id="refreshBtn" class="sort-btn" onclick="location.reload();">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
        </div>

        <div class="table-wrapper">
            <table id="marketTable" class="market-table">
                <thead>
                    <tr>
                        <th data-column="symbol" class="sortable">üìà –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞</th>
                        <th data-column="bid_price" class="sortable">üíµ –¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏</th>
                        <th data-column="ask_price" class="sortable">üí∏ –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏</th>
                        <th data-column="price_24h_pcnt" class="sortable">üìà –ò–∑–º–µ–Ω–µ–Ω–∏–µ 24—á (%)</th>
                        <th data-column="volume_24h" class="sortable">üì¶ –û–±—ä–µ–º 24—á</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    {% for ticker in tickers %}
                    <tr class="data-row" data-symbol="{{ ticker.symbol }}">
                        <td class="symbol-cell"><strong>{{ ticker.symbol }}</strong></td>
                        <td class="price-cell">{{ ticker.bid_price }}</td>
                        <td class="price-cell">{{ ticker.ask_price }}</td>
                        
                        <!-- –õ–æ–≥–∏–∫–∞ —Ü–≤–µ—Ç–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã -->
                        <td class="change-cell 
                            {% if ticker.price_24h_pcnt > 0 %}positive
                            {% elif ticker.price_24h_pcnt < 0 %}negative
                            {% else %}neutral{% endif %}">
                            {% if ticker.price_24h_pcnt > 0 %}+{% endif %}{{ ticker.price_24h_pcnt|floatformat:2 }}%
                        </td>
                        
                        <td class="volume-cell">{{ ticker.volume_24h }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <script src="{% static 'market/js/market_script.js' %}"></script>
</body>
</html>